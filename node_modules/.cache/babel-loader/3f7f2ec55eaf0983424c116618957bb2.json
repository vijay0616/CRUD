{"ast":null,"code":"import { ApiMethods, callApi } from \"../../../utils/api\";\nimport { all, call, fork, put, takeEvery } from \"typed-redux-saga\";\nimport { formSuccess, formFailed } from \"./actions\";\nimport { urlBuilder } from \"../../../utils/url-helpers\";\nimport { API_ROUTES } from \"../../../config/api_routes\";\nimport { FormActionTypes } from \"./types\";\nexport function* formHandler(action) {\n  try {\n    const formValues = action.payload;\n    const postFormUrl = urlBuilder(`${API_ROUTES.POST_FORM_DATA}`, {});\n    const response = yield* call(callApi, ApiMethods.POST.toString(), postFormUrl, formValues);\n\n    if (response.error) {\n      yield put(formSuccess(response.error));\n    } else {\n      yield put(formFailed(response));\n    }\n  } catch (e) {\n    if (e instanceof Error && e.stack) yield put(formFailed(e.stack));else yield put(formFailed(\"unknown error.\"));\n  }\n}\nexport function* formUpdateHandler(action) {\n  try {\n    var _formUpdateValues$id;\n\n    const formUpdateValues = action.payload;\n    const id = (_formUpdateValues$id = formUpdateValues.id) !== null && _formUpdateValues$id !== void 0 ? _formUpdateValues$id : \"\";\n    const updateFormUrl = urlBuilder(`${API_ROUTES.PUT_FORM_DATA}`, {\n      key: id.toString()\n    });\n    const response = yield* call(callApi, ApiMethods.PUT.toString(), updateFormUrl, formUpdateValues);\n    console.log(response);\n\n    if (response.error != undefined) {\n      yield put(formSuccess(response));\n    } else {\n      yield put(formFailed(response));\n    }\n  } catch (e) {\n    if (e instanceof Error && e.stack) yield put(formFailed(e.stack));else yield put(formFailed(\"unknown error.\"));\n  }\n}\n\nfunction* watchFormHandler() {\n  yield takeEvery(FormActionTypes.FORM_REQUEST, formHandler);\n}\n\nfunction* watchUpdateHandler() {\n  yield takeEvery(FormActionTypes.FORM_UPDATE_REQUEST, formUpdateHandler);\n}\n\nfunction* formSaga() {\n  yield all([fork(watchFormHandler), fork(watchUpdateHandler)]);\n}\n\nexport default formSaga;","map":{"version":3,"names":["ApiMethods","callApi","all","call","fork","put","takeEvery","formSuccess","formFailed","urlBuilder","API_ROUTES","FormActionTypes","formHandler","action","formValues","payload","postFormUrl","POST_FORM_DATA","response","POST","toString","error","e","Error","stack","formUpdateHandler","formUpdateValues","id","updateFormUrl","PUT_FORM_DATA","key","PUT","console","log","undefined","watchFormHandler","FORM_REQUEST","watchUpdateHandler","FORM_UPDATE_REQUEST","formSaga"],"sources":["/home/ansio-user/vijaypro/web/src/pages/Form/store/sagas.ts"],"sourcesContent":["import { ApiMethods, callApi } from \"../../../utils/api\";\r\nimport { all, call, fork, put, takeEvery } from \"typed-redux-saga\";\r\nimport {\r\n  formRequest,\r\n  formUpdateRequest,\r\n  formSuccess,\r\n  formFailed,\r\n} from \"./actions\";\r\nimport { urlBuilder } from \"../../../utils/url-helpers\";\r\nimport { API_ROUTES } from \"../../../config/api_routes\";\r\nimport { FormActionTypes } from \"./types\";\r\n\r\nexport function* formHandler(action: ReturnType<typeof formRequest>): any {\r\n  try {\r\n    const formValues = action.payload;\r\n    const postFormUrl = urlBuilder(`${API_ROUTES.POST_FORM_DATA}`, {});\r\n    const response = yield* call(\r\n      callApi,\r\n      ApiMethods.POST.toString(),\r\n      postFormUrl,\r\n      formValues\r\n    );\r\n    if (response.error) {\r\n      yield put(formSuccess(response.error));\r\n    } else {\r\n      yield put(formFailed(response));\r\n    }\r\n  } catch (e) {\r\n    if (e instanceof Error && e.stack) yield put(formFailed(e.stack));\r\n    else yield put(formFailed(\"unknown error.\"));\r\n  }\r\n}\r\n\r\nexport function* formUpdateHandler(\r\n  action: ReturnType<typeof formUpdateRequest>\r\n): any {\r\n  try {\r\n    const formUpdateValues = action.payload;\r\n    const id = formUpdateValues.id ?? \"\";\r\n    const updateFormUrl = urlBuilder(`${API_ROUTES.PUT_FORM_DATA}`, {\r\n      key: id.toString(),\r\n    });\r\n    const response = yield* call(\r\n      callApi,\r\n      ApiMethods.PUT.toString(),\r\n      updateFormUrl,\r\n      formUpdateValues\r\n    );\r\n    console.log(response);\r\n    if (response.error!=undefined) {\r\n      yield put(formSuccess(response));\r\n    } else {\r\n      yield put(formFailed(response));\r\n    }\r\n  } catch (e) {\r\n    if (e instanceof Error && e.stack) yield put(formFailed(e.stack));\r\n    else yield put(formFailed(\"unknown error.\"));\r\n  }\r\n}\r\n\r\nfunction* watchFormHandler() {\r\n  yield takeEvery(FormActionTypes.FORM_REQUEST, formHandler);\r\n}\r\n\r\nfunction* watchUpdateHandler() {\r\n  yield takeEvery(FormActionTypes.FORM_UPDATE_REQUEST, formUpdateHandler);\r\n}\r\n\r\nfunction* formSaga(): any {\r\n  yield all([fork(watchFormHandler), fork(watchUpdateHandler)]);\r\n}\r\n\r\nexport default formSaga;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}